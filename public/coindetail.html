<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coin Detail</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.26.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@2.2.0"></script>

  <link rel="stylesheet" href="path/to/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="./assets/css/aboutus.css">
  <link rel="stylesheet" href="./assets/css/coindetails.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;400;600;800&family=Poppins:wght@400;700&display=swap"
    rel="stylesheet">
  <script src="./app.js"></script>

</head>
<div id="bg" class="bg-opacity hidden"></div>
<section class="coin-detail">
  <div id="modal" class="details-wrapper hidden">
    <div class="x" onclick="closemodal();">x</div>
    <div class="coin-item">
      <img src="./assets/images/Bitcoin.png" alt="" width="64" height="64">
      <h4>Bitcoin</h4>
    </div>
    <div class="price">
      <h2>$27,108.00</h2>
    </div>
  </div>
</section>
<!--  -->
<div class="small-nav">
  <!-- Navbar -->
  <div class="relative w-full p-2">
    <div class="flex justify-between-between items-center w-full">
      <div class="w-full">
        <a href="/" class="logo"><img src="./assets/images/logo-resized.png" alt="CrytoWave Logo" width="200"
            height="50"></a>
      </div>
      <div aria-label="burger-menu">
        <button id="menu" aria-label="open menu" onclick="sidebarHandler(true)" class="burger">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="36" height="36"
            viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round"
            stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <line x1="4" y1="6" x2="20" y2="6" />
            <line x1="4" y1="12" x2="20" y2="12" />
            <line x1="4" y1="18" x2="20" y2="18" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <!--Mobile responsive sidebar-->
  <div class="mob-nav" id="mobile-nav">
    <div class="mob-nav2" onclick="sidebarHandler(false)"></div>
    <div class="mob-nav3">
      <div class="mob-nav4">
        <div class="mob-nav5">
          <div>
            <div class="mob-nav6">
              <div>
                <a href="/" class="logo"><img src="./assets/images/logo-resized.png" alt="CrytoWave Logo" width="200"
                    height="50"></a>
              </div>
              <div class="flex w-full items-end justify-end">
                <div class="flex items-center justify-end w-full">
                  <div id="cross" aria-label="close menu"
                    class="focus:outline-none focus:ring-2 rounded-md text-gray-800" onclick="sidebarHandler(false)">
                    <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/hero_5_Svg3.svg" alt="cross" />
                  </div>
                </div>
              </div>
            </div>
            <div aria-label="li-main" class="flex items-center gap4 flex-col">
              <div aria-label="nav-list" class="w-ul">
                <ul class="flex gap5 w-full flex-col">
                  <li><a href="./index.html" class="active">Home</a></li>
                  <li><a href="./markets.html">Markets</a></li>
                  <li><a href="./aboutus.html">About Us</a></li>
                  <li><a href="./contactus.html">Contact Us</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--  -->
<header>
  <div class="wrapper navbar responsive">
    <a href="#" class="logo"><img src="./assets/images/logo-resized.png" alt="CrytoWave Logo" width="200"
        height="50"></a>

    <nav>
      <ul>
        <li><a href="./index.html" class="active">Home</a></li>
        <li><a href="./markets.html">Markets</a></li>
        <li><a href="./aboutus.html">About Us</a></li>
        <li><a href="./contactus.html">Contact Us</a></li>

      </ul>
    </nav>
    <!-- <a href="#"><button class="right-button" onclick="logout()">Logout</button></a> -->

    <a href="./login.html"> <button class="right-button">Login / Sign Up</button>
    </a>
  </div>
</header>
<section class="coin-detail">
  <div class="details-wrapper2">
    <div class="coin-item">
      <img src="./assets/images/Bitcoin.png" alt="" width="64" height="64">
      <h4>Bitcoin</h4>
    </div>
    <div class="price">
      <h2>$27,108.00</h2>
    </div>
  </div>
</section>
<div class="page-container">
  <div class="content">
    <div id="chart">

    </div>

    <div class="btn-options">
      <button onclick="updateChartWithInterval('1h')">1 Hour</button>
      <button onclick="updateChartWithInterval('1d')">1 Day</button>
      <button onclick="updateChartWithInterval('7d')">1 Week</button>
      <button onclick="updateChartWithInterval('30d')">1 Month</button>
      <button onclick="updateChartWithInterval('180d')">6 Months</button>
      <button onclick="updateChartWithInterval('1y')">1 Year</button>

    </div>
  </div>
  <div class="sidebar">
    <div class="compare-section">
      <h3>Compare Cryptocurrencies</h3>
      <div class="filter-checkboxes">
        <label>
          <input onclick="showmodal();" type="checkbox" value="BTC"> Bitcoin
        </label>
        <label>
          <input type="checkbox" value="BNB"> Binance
        </label>
        <label>
          <input type="checkbox" value="DOGE"> Doge
        </label>
        <label>
          <input type="checkbox" value="TRX"> Tron
        </label>
        <label>
          <input type="checkbox" value="USD"> USD
        </label>
        <label>
          <input type="checkbox" value="XRP"> XRP
        </label>
        <label>
          <input type="checkbox" value="ADA"> Cardano
        </label>
        <label>
          <input type="checkbox" value="USDT"> Tether
        </label>
        <label>
          <input type="checkbox" value="SOL"> Solana
        </label>
        <label>
          <input type="checkbox" value="MATIC"> Polygon
        </label>
        <label>
          <input type="checkbox" value="DOT"> Polkadot
        </label>
        <label>
          <input type="checkbox" value="ETH"> Ethereum
        </label>
      </div>
      <button class="compare-btn">Compare</button>
    </div>
  </div>
</div>
<div class="container-convertor">
  <form action="">
    <input type="text" name="amount" id="amount" placeholder="Enter Amount" required>
    <label id="fromCurrencyName"></label>
    <div class="select-field">
      <select name="fromCurrency" id="fromCurrency" onchange="showFromCurrencyName()">
        <option value="USD" selected="">USD - US Dollar</option>
        <option value="EUR">EUR - Euro</option>
        <option value="GBP">GBP - British Pound</option>
        <option value="CAD">CAD - Canadian Dollar</option>
        <option value="AUD">AUD - Australian Dollar</option>
        <option value="JPY">JPY - Japanese Yen</option>
        <option value="INR">INR - India Rupee</option>
        <option value="NZD">NZD - New Zealand Dollar</option>
        <option value="CHF">CHF - Swiss Franc</option>
        <option value="ZAR">ZAR - South African Rand</option>
        <option value="BGN">BGN - Bulgarian Lev</option>
        <option value="SGD">SGD - Singapore Dollar</option>
        <option value="HKD">HKD - Hong Kong Dollar</option>
        <option value="SEK">SEK - Swedish Krona</option>
        <option value="THB">THB - Thai Baht</option>
        <option value="HUF">HUF - Hungarian Forint</option>
        <option value="CNY">CNY - Chinese Yuan Renminbi</option>
        <option value="NOK">NOK - Norwegian Krone</option>
        <option value="MXN">MXN - Mexican Peso</option>
        <option value="GHS">GHS - Ghanians Cedi</option>
        <option value="NGN">NGN - Nigerian Naira</option>
      </select>
      <select name="toCurrency" id="toCurrency" onchange="showCurrencyName()">
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="ETH">Ethereum (ETH)</option>
        <option value="USDT">Tether (USDT)</option>
        <option value="BNB">Binance Coin (BNB)</option>
        <option value="USDC">USD Coin (USDC)</option>
        <option value="XRP">XRP (XRP)</option>
        <option value="BUSD">Binance USD (BUSD)</option>
        <option value="ADA">cardano (ADA)</option>
        <option value="DOGE">Dogecoin (DOGE)</option>
        <option value="MATIC">Polygon (MATIC)</option>
        <option value="SOL">Solana (SOL)</option>
        <option value="DOT">Polkadot (DOT)</option>
        <option value="SHIB">Shiba Inu (SHIB)</option>
        <option value="LTC">Litecoin (LTC)</option>
        <option value="TRX">Tron (TRX)</option>
        <option value="AVAX">Avalanche (AVAX)</option>
      </select>
    </div>
    <br>
    <button type="button" id="convert" class="primary-btn">
      Convert
    </button>
  </form>
</div>


<script>
  // Nav
  let sideBar = document.getElementById("mobile-nav");
  let menu = document.getElementById("menu");
  let cross = document.getElementById("cross");
  const sidebarHandler = (check) => {
    if (check) {
      sideBar.style.transform = "translateX(0px)";
      menu.classList.add("hidden");
      cross.classList.remove("hidden");
    } else {
      sideBar.style.transform = "translateX(-100%)";
      menu.classList.remove("hidden");
      cross.classList.add("hidden");
    }
  };

</script>

<script>


  var chart = new ApexCharts(document.querySelector("#chart"), {
    chart: {
      id: 'realtime',
      type: 'line',
      height: 350,
      animations: {
        enabled: true,
        easing: 'linear',
        dynamicAnimation: {
          speed: 1000 // 1 second update interval
        }
      }
    },
    toolbar: {
      show: false
    },

    series: [{
      name: 'Bitcoin Price',
      data: []
    }],
    xaxis: {
      type: 'datetime',
      labels: {
        formatter: function (value) {
          const dateTime = luxon.DateTime.fromMillis(value);
          let formatString = 'LLL dd, yyyy'; // Default format

          // Change format for 1-hour and 1-day intervals
          if (dateTime.diffNow('hours').hours <= 1) {
            formatString = 'hh:mm a';
          } else if (dateTime.diffNow('days').days <= 1) {
            formatString = 'hh:mm a';
          }

          return dateTime.toFormat(formatString);
        }
      }
    },
    yaxis: {
      labels: {
        formatter: function (value) {
          return '$' + value.toFixed(2);
        }
      }
    },
    title: {
      text: 'Bitcoin Price',
      align: 'left'
    },
    markers: {
      size: 0
    },
    stroke: {
      curve: 'smooth'
    },
    dataLabels: {
      enabled: false
    }
  });

  // Fetch Bitcoin price data from CoinGecko API
  async function fetchBitcoinPriceData(minutes) {
    try {
      const response = await fetch(`https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&interval=1m&days=1`);
      const data = await response.json();
      const prices = data.prices;

      // Format data for ApexCharts
      const formattedData = prices.map(price => [price[0], price[1]]);

      // Update chart series with new data
      chart.updateSeries([{
        data: formattedData
      }]);
    } catch (error) {
      console.error('Error fetching Bitcoin price data:', error);
    }
  }
  // Update Bitcoin price data based on selected time interval
  function updateChart(interval) {
    let minutes;

    switch (interval) {
      case '1h':
        minutes = 60;
        break;
      case '1d':
        minutes = 1440;
        break;
      case '7d':
        minutes = 10080;
        break;
      case '30d':
        minutes = 43200;
        break;
      case '180d':
        minutes = 259200;
        break;
      case '1y':
        minutes = 525600;
        break;
      default:
        minutes = 1440;
    }

    fetchBitcoinPriceData(minutes);
  }

  // Render chart
  chart.render();

  // Initial data fetch for 1-day interval
  fetchBitcoinPriceData(60);

  // Update Bitcoin price data every 1 minute for hourly and one day intervals
  setInterval(function () {
    // const selectedInterval = document.querySelector('input[name="interval"]:checked').value;
    const selectedInterval = interval;


    if (selectedInterval === '1h' || selectedInterval === '1d') {
      fetchBitcoinPriceData(1);
    }
  }, 60000);

  // Update Bitcoin price data for other intervals
  function updateChartWithInterval(interval) {
    if (interval === '1h' || interval === '1d') {
      fetchBitcoinPriceData(1);
    } else if (interval === '7d') {
      fetchBitcoinPriceData(10080);
    } else {
      updateChart(interval);
    }
  }


</script>


</body>

</html>